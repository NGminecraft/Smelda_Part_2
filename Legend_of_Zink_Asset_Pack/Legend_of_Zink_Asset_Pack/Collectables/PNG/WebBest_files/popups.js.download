define(["version!fly/managers/debug"],function(e){const n=e.init("popups");return n.log("let's widget"),(e,o)=>{n.log("node: ",e),n.log("opts: ",o);const t=e.classList.contains("sharebar__button"),s=e.href;n.log("isLarge: ",t),n.log("path: ",s),e.addEventListener("click",e=>{n.log("e: ",e),e.preventDefault(),i()},!1);const i=()=>{n.log("popupHandler");let e=t?960:500,o=t?551:620,i=screen.width/2-e/2,a=screen.height/2-o/2,r=(window.open(s,"securePopup","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=yes, copyhistory=no, width="+e+", height="+o+", top="+a+", left="+i),window.addEventListener?"addEventListener":"attachEvent");(0,window[r])("attachEvent"==r?"onmessage":"message",function(e){e.origin.indexOf("cbsnews")<-1||"loginWindow"!==e.data||(n.log("eventer e: ",e),location.href=((e,n)=>e+=(e.split("?")[1]?"&":"?")+n)(location.href,"login=1"))},!1)}}});